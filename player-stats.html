<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Player Comparison</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
body {
    font-family:'Cairo', Arial, sans-serif;
    background: linear-gradient(rgba(15,15,15,0.85), rgba(15,15,15,0.85)), url("standings-bg.jpg");
    background-size: cover;
    color: #fff;
    font-weight:700;
    text-align: center;
}
.container {
    display: flex;
    justify-content: center;
    align-items: flex-start;
    gap: 80px;
    margin-top: 50px;
}
.player-box {
    background: rgba(43, 43, 43, 0.9);
    padding: 20px;
    border-radius: 15px;
    width: 300px;
}
.player-box img {
    width: 150px;
    height: 150px;
    object-fit: contain;
}
.player-box h3 {
    margin: 15px 0 10px;
}
.stats {
    text-align: left;
    margin-top: 10px;
}
.stats p {
    margin: 5px 0;
}
</style>
</head>
<body>

<h1>Player Comparison</h1>

<div class="container">
    <div class="player-box" id="player1">
        <img src="left-logo.png" alt="Player 1 Logo">
        <h3>Ahmed Ibrahem</h3>
        <div class="stats" id="stats1">
            <p>Matches Played: 0</p>
            <p>Points: 0</p>
            <p>Wins: 0</p>
            <p>Draws: 0</p>
            <p>Losses: 0</p>
            <p>Goals Scored: 0</p>
            <p>Goals Conceded: 0</p>
        </div>
    </div>

    <div class="player-box" id="player2">
        <img src="right-logo.png" alt="Player 2 Logo">
        <h3>Abdoulrahman Atef</h3>
        <div class="stats" id="stats2">
            <p>Matches Played: 0</p>
            <p>Points: 0</p>
            <p>Wins: 0</p>
            <p>Draws: 0</p>
            <p>Losses: 0</p>
            <p>Goals Scored: 0</p>
            <p>Goals Conceded: 0</p>
        </div>
    </div>
</div>

<script>
// هنا هنجيب البيانات من الشيت ونحسب كل الإحصائيات لكل لاعب
const sheetURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vT54W8eLRnu7YjOYR49uv-FWsBL1VZR3JUptdsdaP7gYmVIyrtHEmoOd0ZR0uaAijzMXbAhmweN1_5n/pub?gid=1129539507&single=true&output=csv";

function parseCSV(text) {
    return text.trim().split("\n").map(row => row.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/).map(col => col.replace(/^"|"$/g, '')));
}

fetch(sheetURL + "&t=" + Date.now(), { cache: "no-store" })
.then(res => res.text())
.then(csv => {
    const data = parseCSV(csv).slice(1, 18); // الصفوف 1-17
    const stats = {
        "Ahmed Ibrahem": {matches:0, points:0, wins:0, draws:0, losses:0, gs:0, gc:0},
        "Abdoulrahman Atef": {matches:0, points:0, wins:0, draws:0, losses:0, gs:0, gc:0}
    };

    data.forEach(row => {
        const owner = row[11];
        if(!stats[owner]) return;

        const played = parseInt(row[3]) || 0;
        const wins = parseInt(row[4]) || 0;
        const draws = parseInt(row[5]) || 0;
        const losses = parseInt(row[6]) || 0;
        const gs = parseInt(row[8]) || 0;
        const gc = parseInt(row[9]) || 0;
        const points = parseInt(row[10]) || 0;

        stats[owner].matches += played;
        stats[owner].wins += wins;
        stats[owner].draws += draws;
        stats[owner].losses += losses;
        stats[owner].gs += gs;
        stats[owner].gc += gc;
        stats[owner].points += points;
    });

    // عرض الإحصائيات
    const stats1Div = document.getElementById("stats1");
    const stats2Div = document.getElementById("stats2");

    stats1Div.innerHTML = `
        <p>Matches Played: ${stats["Ahmed Ibrahem"].matches}</p>
        <p>Points: ${stats["Ahmed Ibrahem"].points}</p>
        <p>Wins: ${stats["Ahmed Ibrahem"].wins}</p>
        <p>Draws: ${stats["Ahmed Ibrahem"].draws}</p>
        <p>Losses: ${stats["Ahmed Ibrahem"].losses}</p>
        <p>Goals Scored: ${stats["Ahmed Ibrahem"].gs}</p>
        <p>Goals Conceded: ${stats["Ahmed Ibrahem"].gc}</p>
    `;
    stats2Div.innerHTML = `
        <p>Matches Played: ${stats["Abdoulrahman Atef"].matches}</p>
        <p>Points: ${stats["Abdoulrahman Atef"].points}</p>
        <p>Wins: ${stats["Abdoulrahman Atef"].wins}</p>
        <p>Draws: ${stats["Abdoulrahman Atef"].draws}</p>
        <p>Losses: ${stats["Abdoulrahman Atef"].losses}</p>
        <p>Goals Scored: ${stats["Abdoulrahman Atef"].gs}</p>
        <p>Goals Conceded: ${stats["Abdoulrahman Atef"].gc}</p>
    `;
})
.catch(err => console.error("Error loading sheet:", err));
</script>

</body>
</html>
