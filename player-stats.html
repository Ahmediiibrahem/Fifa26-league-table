<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Player Stats Comparison</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap" rel="stylesheet">
<link rel="icon" type="image/jpeg" href="fifa26.jpeg">
<style>
body {
    font-family:'Cairo', Arial, sans-serif;
    background: linear-gradient(rgba(15,15,15,0.85), rgba(15,15,15,0.85)), url("standings-bg.jpg");
    background-size: cover;
    background-position: center;
    color: #fff;
    margin: 0;
    padding: 0;
}

h2 { text-align:center; margin:30px 0 20px 0; font-weight:800; }

.stats-container {
    display: flex;
    justify-content: center;
    align-items: flex-start;
    gap: 100px;
    margin: 0 auto 50px auto;
    flex-wrap: wrap;
}

.player-box {
    text-align: center;
}

.player-box img {
    width: 160px;
    height: 160px;
    border-radius: 15px;
    border: 3px solid #fff;
    margin-bottom: 20px;
}

.stats-cards {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.stats-card {
    background: #1a1a1a;
    padding: 10px 15px;
    border-radius: 10px;
    display: flex;
    justify-content: space-between;
    font-weight: 600;
    min-width: 180px;
}

.stats-card span { font-weight: 800; color: #3498db; }

</style>
</head>
<body>

<h2>Player Comparison</h2>

<div class="stats-container">
    <div class="player-box" id="leftPlayerBox">
        <img src="left-logo.png" alt="Ahmed Ibrahem">
        <div class="stats-cards" id="leftPlayerStats"></div>
    </div>

    <div class="player-box" id="rightPlayerBox">
        <img src="right-logo.png" alt="Abdoulrahman Atef">
        <div class="stats-cards" id="rightPlayerStats"></div>
    </div>
</div>

<script>
// رابط شيت Standings
const standingsURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vT54W8eLRnu7YjOYR49uv-FWsBL1VZR3JUptdsdaP7gYmVIyrtHEmoOd0ZR0uaAijzMXbAhmweN1_5n/pub?gid=1129539507&single=true&output=csv";

function parseCSV(text) {
    return text.trim().split("\n").map(row =>
        row.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/).map(col => col.replace(/^"|"$/g, ''))
    );
}

function computePlayerStats(data, playerName) {
    const stats = {matches:0, points:0, W:0, D:0, L:0, GF:0, GC:0};
    data.forEach(row => {
        const owner = row[11].trim();
        if(owner === playerName) {
            stats.matches += parseInt(row[3]) || 0;
            stats.points += parseInt(row[10]) || 0;
            stats.W += parseInt(row[4]) || 0;
            stats.D += parseInt(row[5]) || 0;
            stats.L += parseInt(row[6]) || 0;
            stats.GF += parseInt(row[8]) || 0;
            stats.GC += parseInt(row[9]) || 0;
        }
    });
    return stats;
}

function displayPlayerStats(containerId, playerName, stats) {
    const container = document.getElementById(containerId);
    container.innerHTML = `
        <div class="stats-card"><span>Matches Played</span><span>${stats.matches}</span></div>
        <div class="stats-card"><span>Total Points</span><span>${stats.points}</span></div>
        <div class="stats-card"><span>Wins</span><span>${stats.W}</span></div>
        <div class="stats-card"><span>Draws</span><span>${stats.D}</span></div>
        <div class="stats-card"><span>Losses</span><span>${stats.L}</span></div>
        <div class="stats-card"><span>Goals Scored</span><span>${stats.GF}</span></div>
        <div class="stats-card"><span>Goals Conceded</span><span>${stats.GC}</span></div>
    `;
}

fetch(standingsURL + "&t=" + Date.now(), {cache:"no-store"})
.then(res => res.text())
.then(csv => {
    const data = parseCSV(csv).slice(1,18);
    displayPlayerStats("leftPlayerStats", "Ahmed Ibrahem", computePlayerStats(data, "Ahmed Ibrahem"));
    displayPlayerStats("rightPlayerStats", "Abdoulrahman Atef", computePlayerStats(data, "Abdoulrahman Atef"));
})
.catch(err => console.error("Error loading sheet:", err));
</script>

</body>
</html>
