<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Player Stats Comparison</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap" rel="stylesheet">
<link rel="icon" type="image/jpeg" href="fifa26.jpeg">
<style>
body {
    font-family:'Cairo', Arial, sans-serif;
    background: linear-gradient(rgba(15,15,15,0.85), rgba(15,15,15,0.85)), url("standings-bg.jpg");
    background-size: cover;
    background-position: center;
    color: #fff;
    margin: 0;
    padding: 0;
}

.tab-container {
    display: flex;
    justify-content: flex-start;
    padding: 15px 30px;
    background: #2b2b2b;
}

.tab-container a {
    text-decoration: none;
    color: #fff;
    font-weight: 700;
    padding: 10px 25px;
    border-radius: 8px;
    transition: all 0.3s ease;
}

.tab-container a:hover {
    background: #3498db;
    transform: scale(1.05);
}

h2 { text-align:center; margin:30px 0 30px 0; font-weight:800; }

.stats-container {
    display: flex;
    justify-content: center;
    align-items: flex-start;
    gap: 150px;
    margin: 0 auto 50px auto;
    flex-wrap: wrap;
}

.player-box {
    text-align: center;
}

.player-box img {
    width: 220px;
    height: 220px;
    border-radius: 20px;
    border: 4px solid #fff;
    margin-bottom: 20px;
}

/* تصميم منطقة الاحصائيات */
.stats-table {
    display: flex;
    flex-direction: column;
    gap: 20px;
    text-align: center;
    margin-top: 20px;
}

.stat-row {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 80px;
    font-weight: 700;
    font-size: 20px;
}

.stat-label {
    min-width: 200px;
}

.stat-left { color: red; }
.stat-right { color: #3498db; }

</style>
</head>
<body>

<div class="tab-container">
    <a href="index.html">Home</a>
</div>

<h2>Player Comparison</h2>

<div class="stats-container">
    <div class="player-box">
        <img src="left-logo.png" alt="Ahmed Ibrahem">
    </div>

    <div class="player-box">
        <img src="right-logo.png" alt="Abdoulrahman Atef">
    </div>
</div>

<div class="stats-table" id="statsTable">
    <!-- سيتم تعبئة الإحصائيات هنا -->
</div>

<script>
// رابط شيت Standings
const standingsURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vT54W8eLRnu7YjOYR49uv-FWsBL1VZR3JUptdsdaP7gYmVIyrtHEmoOd0ZR0uaAijzMXbAhmweN1_5n/pub?gid=1129539507&single=true&output=csv";

function parseCSV(text) {
    return text.trim().split("\n").map(row =>
        row.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/).map(col => col.replace(/^"|"$/g, ''))
    );
}

function computePlayerStats(data, playerName) {
    const stats = {matches:0, points:0, W:0, D:0, L:0, GF:0, GC:0};
    data.forEach(row => {
        const owner = row[11].trim();
        if(owner === playerName) {
            stats.matches += parseInt(row[3]) || 0;
            stats.points += parseInt(row[10]) || 0;
            stats.W += parseInt(row[4]) || 0;
            stats.D += parseInt(row[5]) || 0;
            stats.L += parseInt(row[6]) || 0;
            stats.GF += parseInt(row[8]) || 0;
            stats.GC += parseInt(row[9]) || 0;
        }
    });
    return stats;
}

function displayStats(leftStats, rightStats) {
    const container = document.getElementById("statsTable");
    const statNames = [
        {label:"Matches Played", key:"matches"},
        {label:"Total Points", key:"points"},
        {label:"Wins", key:"W"},
        {label:"Draws", key:"D"},
        {label:"Losses", key:"L"},
        {label:"Goals Scored", key:"GF"},
        {label:"Goals Conceded", key:"GC"}
    ];

    container.innerHTML = "";
    statNames.forEach(stat => {
        const row = document.createElement("div");
        row.className = "stat-row";
        row.innerHTML = `
            <div class="stat-left">${leftStats[stat.key]}</div>
            <div class="stat-label">${stat.label}</div>
            <div class="stat-right">${rightStats[stat.key]}</div>
        `;
        container.appendChild(row);
    });
}

fetch(standingsURL + "&t=" + Date.now(), {cache:"no-store"})
.then(res => res.text())
.then(csv => {
    const data = parseCSV(csv).slice(1,18);
    const leftStats = computePlayerStats(data, "Ahmed Ibrahem");
    const rightStats = computePlayerStats(data, "Abdoulrahman Atef");
    displayStats(leftStats, rightStats);
})
.catch(err => console.error("Error loading sheet:", err));
</script>

</body>
</html>
