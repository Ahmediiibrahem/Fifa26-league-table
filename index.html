<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>League Table</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap" rel="stylesheet">
<link rel="icon" type="image/jpeg" href="FaviconFifa26.jpeg">

<style>
.page-header { display:flex; justify-content:space-between; align-items:center; padding:10px 20px; }
.logo-box { text-align:center; cursor:pointer; }
.header-logo { height:100px; object-fit:contain; }
.player-points { margin-top:5px; font-weight:700; font-size:16px; }

nav { display:flex; justify-content:center; gap:20px; margin-bottom:20px; flex-wrap:wrap; }
nav a {
  text-decoration:none; color:#fff; font-weight:700;
  padding:10px 25px; border-radius:8px;
  background:#2b2b2b; transition:.3s;
}
nav a:hover { background:#3498db; transform:scale(1.05); }
nav a.active { background:#3498db; box-shadow:0 4px 8px rgba(0,0,0,.3); }

body{
  font-family:'Cairo',Arial,sans-serif;
  color:#fff; font-weight:700;
  background:linear-gradient(rgba(15,15,15,.85),rgba(15,15,15,.85)),url("standings-bg.jpg");
  background-size:cover; background-attachment:fixed;
  margin:0;
}

h2{ text-align:center; margin-bottom:15px; font-weight:800; }

table{ width:100%; border-collapse:collapse; font-size:14px; }
th{ background:#2b2b2b; padding:10px; font-weight:800; }
td{ padding:8px; font-weight:700; }
tr:nth-child(even){ background:#1a1a1a; }

.rank,
.logo-col{
  background:#3a3a3a;
  text-align:center;
  font-weight:800;
}

/* ===== LOGO COLUMN ===== */
.team-logo{
  width:26px;
  height:26px;
  object-fit:contain;
  filter: drop-shadow(0 2px 6px rgba(0,0,0,.6));
}

/* ===== TEAM NAME ===== */
.team-name{
  text-align:left;
  padding-left:10px;
  white-space:nowrap;
}

/* ===== FORM ===== */
.form-box{ display:flex; justify-content:center; gap:3px; }
.form-box div{
  width:18px; height:18px; line-height:18px;
  font-size:12px; font-weight:800;
  border-radius:3px; text-align:center;
}
.form-W{ background:green; }
.form-L{ background:red; }
.form-D{ background:gray; }

/* ===== RULES ===== */
.rules-container{ width:90%; margin:20px auto; }
.rules-toggle{
  width:100%; background:#2b2b2b; color:#fff;
  border:none; padding:12px 20px;
  font-size:16px; font-weight:700;
  border-radius:8px; cursor:pointer;
  display:flex; justify-content:space-between;
}
.rules-toggle:hover{ background:#3498db; }
.rules-content{
  max-height:0; overflow:hidden;
  transition:.5s;
  background:#1a1a1a;
  padding:0 20px;
  border-radius:8px;
}
.rules-content.open{ max-height:500px; padding:15px 20px; }
</style>
</head>

<body>

<div class="page-header">
  <div class="logo-box">
    <img src="left-logo.png" class="header-logo left">
    <div id="left-points">Points: 0</div>
  </div>
  <div class="logo-box">
    <img src="right-logo.png" class="header-logo right">
    <div id="right-points">Points: 0</div>
  </div>
</div>

<nav>
  <a href="index.html" class="active">Standings</a>
  <a href="matches.html">Results</a>
  <a href="upcoming.html">Upcoming</a>
  <a href="team-stats.html">Stats</a>
  <a href="scorers.html">Scorers</a>
</nav>

<h2>League Table</h2>

<table>
<thead>
<tr>
  <th>#</th>
  <th>Logo</th>
  <th>Team</th>
  <th>P</th>
  <th>W</th>
  <th>D</th>
  <th>L</th>
  <th>DIFF</th>
  <th>G/S</th>
  <th>G/C</th>
  <th>Points</th>
  <th>Owner</th>
  <th>Form</th>
</tr>
</thead>
<tbody></tbody>
</table>

<div class="rules-container">
<button class="rules-toggle">Rules â–¼</button>
<div class="rules-content">
  <p>If teams finish level on points:</p>
  <ol>
    <li>Points</li>
    <li>Goal Difference</li>
    <li>Goals Scored</li>
    <li>Goals Conceded</li>
  </ol>
</div>
</div>

<script>
const standingsURL =
"https://docs.google.com/spreadsheets/d/e/2PACX-1vT54W8eLRnu7YjOYR49uv-FWsBL1VZR3JUptdsdaP7gYmVIyrtHEmoOd0ZR0uaAijzMXbAhmweN1_5n/pub?gid=1129539507&single=true&output=csv";

const formURL =
"https://docs.google.com/spreadsheets/d/e/2PACX-1vT54W8eLRnu7YjOYR49uv-FWsBL1VZR3JUptdsdaP7gYmVIyrtHEmoOd0ZR0uaAijzMXbAhmweN1_5n/pub?gid=882748508&single=true&output=csv";

function parseCSV(t){
  return t.trim().split("\n").map(r =>
    r.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/).map(c=>c.replace(/^"|"$/g,""))
  );
}

function teamLogoSrc(name){
  return `logos/${encodeURIComponent(name)}.png`;
}

let formData=[], formHeaders=[];

fetch(formURL).then(r=>r.text()).then(csv=>{
  const d=parseCSV(csv);
  formHeaders=d[0].slice(1).map(h=>h.toLowerCase());
  formData=d.slice(1).map(r=>r.slice(1));
});

fetch(standingsURL).then(r=>r.text()).then(csv=>{
  const rows=parseCSV(csv).slice(1,18);
  const tbody=document.querySelector("tbody");
  const pointsByOwner={};

  rows.forEach((c,i)=>{
    if(!c[3]) return;
    const team=c[2].trim();
    const owner=c[11];
    const pts=+c[10]||0;
    pointsByOwner[owner]=(pointsByOwner[owner]||0)+pts;

    let idx=formHeaders.indexOf(team.toLowerCase());
    let formHTML="";
    if(idx>-1){
      formHTML='<div class="form-box">';
      formData.forEach(r=>{
        const v=(r[idx]||"").toLowerCase();
        if(v==="win") formHTML+='<div class="form-W">W</div>';
        else if(v==="lost") formHTML+='<div class="form-L">L</div>';
        else if(v==="draw") formHTML+='<div class="form-D">D</div>';
      });
      formHTML+='</div>';
    }

    tbody.innerHTML+=`
    <tr>
      <td class="rank">${i+1}</td>
      <td class="logo-col">
        <img class="team-logo" src="${teamLogoSrc(team)}" onerror="this.style.display='none'">
      </td>
      <td class="team-name">${team}</td>
      <td>${c[3]}</td>
      <td>${c[4]}</td>
      <td>${c[5]}</td>
      <td>${c[6]}</td>
      <td>${c[7]}</td>
      <td>${c[8]}</td>
      <td>${c[9]}</td>
      <td>${c[10]}</td>
      <td>${c[11]}</td>
      <td>${formHTML}</td>
    </tr>`;
  });

  document.getElementById("left-points").textContent =
    "Points: " + (pointsByOwner["Ahmed Ibrahem"]||0);
  document.getElementById("right-points").textContent =
    "Points: " + (pointsByOwner["Abdoulrahman Atef"]||0);
});

document.querySelector(".rules-toggle").onclick=()=>{
  document.querySelector(".rules-content").classList.toggle("open");
};
</script>

</body>
</html>
